self.rpc.CONFIG.TIMEOUT=42e3,self.rpc.CONFIG.HEARTBEAT=4200;const t={app:self.rpc.remote.app,getDevice:function(r){return new Proxy({},{get:(e,n)=>"id"==n?r:function(...e){return(0,t.app.runDevice)(r,n,...e)}})}};var r,e,n;!function(t){var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"==typeof module,s=t.regeneratorRuntime;if(s)u&&(module.exports=s);else{(s=t.regeneratorRuntime=u&&module.exports||{}).wrap=w;var l="suspendedStart",f="suspendedYield",h="executing",p="completed",d={},v={};v[i]=function(){return this};var y=Object.getPrototypeOf,g=y&&y(y(B([])));g&&g!==e&&n.call(g,i)&&(v=g);var m=C.prototype=L.prototype=Object.create(v);x.prototype=m.constructor=C,C.constructor=x,C[c]=x.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===x||"GeneratorFunction"===(r.displayName||r.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,C):(t.__proto__=C,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(m),t},s.awrap=function(t){return{__await:t}},E(k.prototype),k.prototype[a]=function(){return this},s.AsyncIterator=k,s.async=function(t,r,e,n){var o=new k(w(t,r,e,n));return s.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(m),m[c]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},s.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},s.values=B,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),A(e),d}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;A(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:B(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),d}}}function w(t,r,e,n){var o=r&&r.prototype instanceof L?r:L,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n=l;return function(o,i){if(n===h)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return M()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=O(a,e);if(c){if(c===d)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===l)throw n=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=h;var u=b(t,r,e);if("normal"===u.type){if(n=e.done?p:f,u.arg===d)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=p,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function b(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}function L(){}function x(){}function C(){}function E(t){["next","throw","return"].forEach((function(r){t[r]=function(t){return this._invoke(r,t)}}))}function k(t){function r(e,o,i,a){var c=b(t[e],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&n.call(s,"__await")?Promise.resolve(s.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):Promise.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,a)}))}a(c.arg)}var e;this._invoke=function(t,n){function o(){return new Promise((function(e,o){r(t,n,e,o)}))}return e=e?e.then(o,o):o()}}function O(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,O(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=b(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function _(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function A(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function B(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:M}}function M(){return{value:r,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")());var o=[],i={};let a;function c(t){n=t,a||(a=n.subscribeMessage("sprite2robotBroadcast",(function(t){!function(t,r){var n=[255,85,0,0,1,70,1,0],o=8,i=t.length;n[7]=i;for(var a=0;a<i;a++)n[o]=t[a].charCodeAt(0),o++;if(null!=r){n[6]=2;var c=String(r).length;for(n[o++]=c,a=0;a<c;a++)n[o++]=String(r)[a].charCodeAt(0)}n[2]=o-3,e&&e.writeRaw(Uint8Array.from(n))}(t.msg,t.value)})))}function u(t){var r=function(t){var r=function(t){for(var r=new Uint8Array(t),e=[],n=0;n<r.length;n++)e.push(r[n]);return e}(t),e=o=o.concat(r),n=h(e);if(-1===n)return;o=e.slice(n);return function(){var t=[];for(;o.length>=4;){var r=h(o),e=p(o);if(-1===r||-1===e||e<r)break;var n=o.slice(r+2,e);n.length>=s&&console.warn("receive buffer overflow!"),t.push(n),o=o.slice(e+2)}return t.length>0?t:null}()}(t);r&&r.forEach((function(t){if(t[0]==t.length-1&&70===t[3]){let r=function(t){if(1==t[4]){var r=t[5],e=t.slice(6,6+r),n="";e.map((function(t){n+=String.fromCharCode(t)})),i[n]=""}else if(2==t[4]){r=t[5],e=t.slice(6,6+r),n="";e.map((function(t){n+=String.fromCharCode(t)}));var o=t[6+r],a=t.slice(6+r+1,6+r+1+o),c="";a.map((function(t){c+=String.fromCharCode(t)})),i[n]=c}else if(3==t[4])return{type:"cmd",msg:"threadFinish"};return{msg:n,value:c||""}}(t);n.sendMessage("robot2spriteBroadcast",r)}}))}var s=36,l=[255,85],f=[13,10];function h(t){return Array.isArray(t)?t.findIndex((function(r,e){return n=r,o=t[e+1],n===l[0]&&o===l[1];var n,o})):-1}function p(t){return Array.isArray(t)?t.findIndex((function(r,e){return n=r,o=t[e+1],n===f[0]&&o===f[1];var n,o})):-1}const d=[],v=async(t,r)=>{},y={block1546412605792CodesLoop:["broadcaster.loop();"],BLOCK_1546412605792:{onRun:(t,r,e,n)=>{}},block1546413597853CodesLoop:["broadcaster.loop();"],BLOCK_1546413597853:{onRun:(t,r,e,n)=>{}},block1546413700881CodesLib:t=>r.includes("mcore")?["#include <MeMCore.h>"]:r.includes("auriga")?["#include <MeAuriga.h>"]:["#include <Arduino.h>"],block1546413700881CodesDeclare:["OfflineBroadcast broadcaster;","void broadcastHandler/*{$INDEX}*/(){\n  /*{$BRANCH}*/\n  broadcaster.callOK();\n}"],block1546413700881CodesLoop:["broadcaster.loop();"],BLOCK_1546413700881:{onRun:(t,r,e,n)=>{},onAdd:(t,r,e)=>{},onRemove:(t,r,e)=>{}},block1546415356012CodesLoop:["broadcaster.loop();"],BLOCK_1546415356012:{onRun:(t,r,e,n)=>{}}},g={async onLoad(t,e){const n=t.getService("account");if(n){await n.isLogin()||t.workspace.disableBlocks(...d),n.onLogin((()=>{t.workspace.enableBlocks(...d)})),n.onLogout((()=>{t.workspace.disableBlocks(...d)}))}e&&"function"==typeof e.isUploadMode&&v(e.isUploadMode()),c(t),e.tar.name?r=e.tar.name:e.tar.sprite&&(r=e.tar.sprite.name)},onUnload(t,r){a&&a(),a=null},onConnect(t,r){},onDisconnect(t,r){},onStopAll(t,r){},beforeChangeUploadMode:async(t,r)=>!0,beforeChangeDebugMode:async(t,r)=>!0,afterChangeUploadMode:(t,r)=>(v(0,0),!0),afterChangeDebugMode:(t,r)=>(v(0,0),!0),onSelect(t,n){e=n,setTimeout((()=>{v(n.isUploadMode(),0)}),0),n.tar.sprite&&(r=n.tar.sprite.name)},onUnselect(t,r){v(0,0)},beforeCodeUpload(t,r){},afterCodeUpload(t,r){},onRead(t,r){e=r,u(r.readRaw(!0))}};self.rpc.exports={runBlock:function(r,e,n,o,i){var a=y[r];if(!a)return console.error("cannot find opcode of "+r),null;var c=a[e];let u=t.app,s=t.getDevice(n);return"onRun"===e?c(i,u,s,o):c(u,s,o)},runExtension:function(r,e){var n=g[r];if(!n)return console.error("method of "+r+" is no valid"),null;let o=t.app;if(e){return n(o,t.getDevice(e))}return n(o)}};